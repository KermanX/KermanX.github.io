# 2.2-2.8

## simple_ts

https://github.com/kermanx/simple_ts

完成了大部分核心功能，但距离可用还有很大工作量，故暂时搁置。

## Static Program Analysis

## Tree Shaker 本体

没有推进开发工作。

问题：

- 一些 bug 很难查出原因，导致没法上生产
- 多模块支持还是需要做，因为即使是打包后的代码也往往是多模块的
- 优化率怎么才能更高？

## React Optimizer

### Facebook 官方 React Compiler

- 思路：生成 Cache 到 Array 的代码
- Playground: https://playground.react.dev ([Example 1](https://playground.react.dev/#N4Igzg9grgTgxgUxALhAMygOzgFwJYSYAEAYjHgpgCYAyeYOAFMEWuZVWEQL4CURwADrEicQgyKEANnkwIAwtEw4iAXiJQwCMhWoB5TDLmKsTXgG5hRInjRFGbXZwB0UygHMcACzWr1ABn4hEWsYBBxYYgAeADkIHQ4uAHoAPksRbisiMIiYYkYs6yiqPAA3FMLrIiiwAAcAQ0wU4GlZBSUcbklDNqikusaKkKrgR0TnAFt62sYHdmp+VRT7SqrqhOo6Bnl6mCoiAGsEAE9VUfmqZzwqLrHqM7ubolTVol5eTOGigFkEMDB6u4EAAhKA4HCEZ5DNZ9ErlLIWYTcEDcIA))
- 完成度：支持大部分语法和特性，但也有部分语法还不支持。
- 目前不允许在手动优化了（`useMemo`）的情况下继续优化
- 生成的代码非常长

### React Forget

- 思路：自动添加 `useMemo`
- 不开源且未公开发布

### Mitosis

- 思路：转换到其他框架，使用其他框架的细粒度响应式
- Playground: https://mitosis.builder.io/playground/
- 缺陷：其实是 Mitosis 专用的 TSX 转其他框架，不支持所有 React 的用法

### AI?

- 如果 AI 能做到这个程度，那么也不需要人来写任何 JS 代码了

### Via Tree Shaker ?

- 思路：通过类似 Tree Shaker 的逻辑获取信息，编译到其他框架
- 编译到哪个框架？
  - Vue 3 Composition API：用户多，个人比较熟悉。Vapor mode 似乎还活着
  - Svelte/Solid：支持更细粒度的响应式
- 优势：就像 Tree Shaker 本身那样，允许输入任何代码，都能产出正确的结果
- 优势：除了优化性能之用，还可以全自动迁移 React 生态到其他生态
- 缺陷：工作量不小，但似乎没有工作量小的办法
- 优势：如果能做成的话，收益似乎比 Tree Shaker 大

尝试先写出一个 prototype，看看可行性如何。
